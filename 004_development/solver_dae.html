<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>DAE Systems &mdash; Dyssol latest documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/dyssol_style.css" type="text/css" />
    <link rel="shortcut icon" href="../_static/logo.png"/>
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script defer="defer" src="../_static/./mathjax/tex-svg.js"></script>
        <script>window.MathJax = {"options": {"enableMenu": true, "menuOptions": {"settings": {"renderer": "SVG"}}}}</script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="NL Systems" href="solver_kinsol.html" />
    <link rel="prev" title="Thermodynamics" href="thermodynamics.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #0E70B6" >
            <a href="../index.html">
            <img src="../_static/logo_doc.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Get started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../000_get_started/get_started.html">Get started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../000_get_started/get_started.html#installation">Installation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../000_get_started/get_started.html#windows">Windows</a></li>
<li class="toctree-l3"><a class="reference internal" href="../000_get_started/get_started.html#linux">Linux</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../000_get_started/get_started.html#files">Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="../000_get_started/get_started.html#run-your-first-simulation">Run your first simulation</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">User interface</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../001_ui/gui.html">Graphical user interfaced</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../001_ui/gui.html#menu">Menu</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../001_ui/gui.html#file">File</a></li>
<li class="toctree-l3"><a class="reference internal" href="../001_ui/gui.html#setup">Setup</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../001_ui/gui.html#compounds-editor">Compounds editor</a></li>
<li class="toctree-l4"><a class="reference internal" href="../001_ui/gui.html#phases-editor">Phases editor</a></li>
<li class="toctree-l4"><a class="reference internal" href="../001_ui/gui.html#grids-specification">Grids specification</a></li>
<li class="toctree-l4"><a class="reference internal" href="../001_ui/gui.html#holdups-editor">Holdups editor</a></li>
<li class="toctree-l4"><a class="reference internal" href="../001_ui/gui.html#options">Options</a></li>
<li class="toctree-l4"><a class="reference internal" href="../001_ui/gui.html#calculation-sequence">Calculation sequence</a></li>
<li class="toctree-l4"><a class="reference internal" href="../001_ui/gui.html#recycle-streams">Recycle streams</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../001_ui/gui.html#modules">Modules</a></li>
<li class="toctree-l3"><a class="reference internal" href="../001_ui/gui.html#tools">Tools</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../001_ui/gui.html#models-manager">Models manager</a></li>
<li class="toctree-l4"><a class="reference internal" href="../001_ui/gui.html#materials-database">Materials database</a></li>
<li class="toctree-l4"><a class="reference internal" href="../001_ui/gui.html#settings">Settings</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../001_ui/gui.html#help">Help</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../001_ui/gui.html#about">About</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../001_ui/gui.html#tabs">Tabs</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../001_ui/gui.html#flowsheet">Flowsheet</a></li>
<li class="toctree-l3"><a class="reference internal" href="../001_ui/gui.html#simulator">Simulator</a></li>
<li class="toctree-l3"><a class="reference internal" href="../001_ui/gui.html#streams">Streams</a></li>
<li class="toctree-l3"><a class="reference internal" href="../001_ui/gui.html#units">Units</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../001_ui/cli.html">Command line interface</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../001_ui/cli.html#main">Main</a></li>
<li class="toctree-l2"><a class="reference internal" href="../001_ui/cli.html#simulation">Simulation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../001_ui/cli.html#simulation-options">Simulation options</a></li>
<li class="toctree-l3"><a class="reference internal" href="../001_ui/cli.html#phases">Phases</a></li>
<li class="toctree-l3"><a class="reference internal" href="../001_ui/cli.html#compounds">Compounds</a></li>
<li class="toctree-l3"><a class="reference internal" href="../001_ui/cli.html#grids">Grids</a></li>
<li class="toctree-l3"><a class="reference internal" href="../001_ui/cli.html#flowsheet-structure">Flowsheet structure</a></li>
<li class="toctree-l3"><a class="reference internal" href="../001_ui/cli.html#unit-parameters">Unit parameters</a></li>
<li class="toctree-l3"><a class="reference internal" href="../001_ui/cli.html#holdups">Holdups</a></li>
<li class="toctree-l3"><a class="reference internal" href="../001_ui/cli.html#export">Export</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Structure and algorithms</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../002_theory/brief.html">Overview</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../002_theory/brief.html#flowsheet-simulation-of-solids">Flowsheet simulation of solids</a></li>
<li class="toctree-l2"><a class="reference internal" href="../002_theory/brief.html#approaches-and-methods">Approaches and methods</a></li>
<li class="toctree-l2"><a class="reference internal" href="../002_theory/brief.html#software-system-architecture">Software system architecture</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../002_theory/simulation.html">Simulation core</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../002_theory/simulation.html#material-streams">Material streams</a></li>
<li class="toctree-l2"><a class="reference internal" href="../002_theory/simulation.html#units">Units</a></li>
<li class="toctree-l2"><a class="reference internal" href="../002_theory/simulation.html#simulator">Simulator</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../002_theory/simulation.html#main-method-and-approaches">Main method and approaches</a></li>
<li class="toctree-l3"><a class="reference internal" href="../002_theory/simulation.html#built-in-equation-solvers">Built-in equation solvers</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../002_theory/data.html">Data storage subsystem</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../002_theory/data.html#hdf5-data-format">HDF5 data format</a></li>
<li class="toctree-l2"><a class="reference internal" href="../002_theory/data.html#data-caching">Data caching</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../002_theory/materials.html">Material database</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../002_theory/materials.html#dmdb-file">DMDB file</a></li>
<li class="toctree-l2"><a class="reference internal" href="../002_theory/materials.html#constant-parameters">Constant parameters</a></li>
<li class="toctree-l2"><a class="reference internal" href="../002_theory/materials.html#dependent-parameters">Dependent parameters</a></li>
<li class="toctree-l2"><a class="reference internal" href="../002_theory/materials.html#interaction-properties">Interaction properties</a></li>
<li class="toctree-l2"><a class="reference internal" href="../002_theory/materials.html#correlations">Correlations</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../002_theory/materials.html#correlation-search">Correlation search</a></li>
<li class="toctree-l3"><a class="reference internal" href="../002_theory/materials.html#correlation-functions">Correlation functions</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../002_theory/multiDim.html">Multidimentional distributed parameters of solids</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../002_theory/multiDim.html#tree-data-structures">Tree data structures</a></li>
<li class="toctree-l2"><a class="reference internal" href="../002_theory/multiDim.html#treatment-of-dependent-parameters">Treatment of dependent parameters</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../002_theory/multiDim.html#transformation-matrices">Transformation matrices</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../002_theory/multiDim.html#application-of-transformation-matrices">Application of transformation matrices</a></li>
<li class="toctree-l4"><a class="reference internal" href="../002_theory/multiDim.html#application-example">Application example</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../002_theory/time.html">Time point management</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../002_theory/time.html#data-interpolation">Data interpolation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../002_theory/time.html#interpolation-of-distributed-parameters">Interpolation of distributed parameters</a></li>
<li class="toctree-l2"><a class="reference internal" href="../002_theory/time.html#steady-state-units">Steady state units</a></li>
<li class="toctree-l2"><a class="reference internal" href="../002_theory/time.html#dynamic-units-with-recycle">Dynamic units with recycle</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../002_theory/theory.html">Theoretical background</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../002_theory/theory.html#discretization">Discretization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../002_theory/theory.html#process-systems">Process systems</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../002_theory/theory.html#sequential-modular-approach">Sequential-modular approach</a></li>
<li class="toctree-l3"><a class="reference internal" href="../002_theory/theory.html#equation-oriented-approach">Equation-oriented approach</a></li>
<li class="toctree-l3"><a class="reference internal" href="../002_theory/theory.html#partitioning-and-tearing">Partitioning and tearing</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../002_theory/theory.html#numerical-methods">Numerical methods</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../002_theory/theory.html#waveform-relaxation-method">Waveform relaxation method</a></li>
<li class="toctree-l3"><a class="reference internal" href="../002_theory/theory.html#data-extrapolation">Data extrapolation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../002_theory/theory.html#convergence-methods">Convergence methods</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Libraries</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../003_models/units.html">Unit library</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../003_models/unit_agglomerator.html">Agglomerator</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../003_models/unit_agglomerator.html#kernels">Kernels</a></li>
<li class="toctree-l3"><a class="reference internal" href="../003_models/unit_agglomerator.html#solvers">Solvers</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../003_models/unit_crusher.html">Crusher</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../003_models/unit_crusher.html#bond-s-model">Bond’s model</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../003_models/unit_crusher.html#average-bond-work-indices-for-various-materials">Average Bond Work Indices for various materials</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../003_models/unit_crusher.html#cone-model">Cone model</a></li>
<li class="toctree-l3"><a class="reference internal" href="../003_models/unit_crusher.html#const-output-model">Const output model</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../003_models/unit_cyclone.html">Cyclone</a></li>
<li class="toctree-l2"><a class="reference internal" href="../003_models/unit_granulator.html">Granulator</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../003_models/unit_granulator.html#continuous-granulator">Continuous granulator</a></li>
<li class="toctree-l3"><a class="reference internal" href="../003_models/unit_granulator.html#batch-granulator">Batch granulator</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../003_models/unit_inletflow.html">Inlet flow</a></li>
<li class="toctree-l2"><a class="reference internal" href="../003_models/unit_mixer.html">Mixer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../003_models/unit_outletflow.html">Outlet flow</a></li>
<li class="toctree-l2"><a class="reference internal" href="../003_models/unit_screen.html">Screen</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../003_models/unit_screen.html#plitt-s-model">Plitt’s model</a></li>
<li class="toctree-l3"><a class="reference internal" href="../003_models/unit_screen.html#molerus-hoffmann-model">Molerus &amp; Hoffmann model</a></li>
<li class="toctree-l3"><a class="reference internal" href="../003_models/unit_screen.html#probability-model">Probability model</a></li>
<li class="toctree-l3"><a class="reference internal" href="../003_models/unit_screen.html#teipel-hennig-model">Teipel / Hennig model</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../003_models/unit_solidsbunker.html">Solids bunker</a></li>
<li class="toctree-l2"><a class="reference internal" href="../003_models/unit_splitter.html">Splitter</a></li>
<li class="toctree-l2"><a class="reference internal" href="../003_models/unit_timedelay.html">Time delay</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../003_models/unit_timedelay.html#simple-shift">Simple shift</a></li>
<li class="toctree-l3"><a class="reference internal" href="../003_models/unit_timedelay.html#norm-based">Norm-based</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../003_models/solvers.html">Solver library</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../003_models/solvers.html#agglomeration-solvers">Agglomeration solvers</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../003_models/solver_cellaverage.html">Cell average</a></li>
<li class="toctree-l3"><a class="reference internal" href="../003_models/solver_fft.html">FFT</a></li>
<li class="toctree-l3"><a class="reference internal" href="../003_models/solver_fixedpivot.html">Fixed pivot</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">For developers</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="compilation.html">Compilation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="compilation.html#windows">Windows</a><ul>
<li class="toctree-l3"><a class="reference internal" href="compilation.html#compilation-requirements">Compilation requirements</a></li>
<li class="toctree-l3"><a class="reference internal" href="compilation.html#build">Build</a></li>
<li class="toctree-l3"><a class="reference internal" href="compilation.html#build-documentation-and-installers">Build documentation and installers</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="compilation.html#linux">Linux</a><ul>
<li class="toctree-l3"><a class="reference internal" href="compilation.html#sec-development-compilation-linux-requirements">Compilation requirements</a></li>
<li class="toctree-l3"><a class="reference internal" href="compilation.html#install-build-environment">Install build environment</a><ul>
<li class="toctree-l4"><a class="reference internal" href="compilation.html#ubuntu-20-debian-11">Ubuntu 20, Debian 11</a></li>
<li class="toctree-l4"><a class="reference internal" href="compilation.html#ubuntu-22-24-debian-12">Ubuntu 22/24, Debian 12</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="compilation.html#id2">Build</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="models_development.html">For models developers</a><ul>
<li class="toctree-l2"><a class="reference internal" href="models_development.html#configuration-of-visual-studio-project-template">Configuration of Visual Studio project template</a></li>
<li class="toctree-l2"><a class="reference internal" href="models_development.html#unit-development">Unit development</a><ul>
<li class="toctree-l3"><a class="reference internal" href="models_development.html#add-new-unit-to-the-template-project">Add new unit to the template project</a></li>
<li class="toctree-l3"><a class="reference internal" href="models_development.html#configure-dyssol-to-work-with-implemented-units">Configure Dyssol to work with implemented units</a></li>
<li class="toctree-l3"><a class="reference internal" href="models_development.html#development-of-steady-state-units">Development of steady-state units</a><ul>
<li class="toctree-l4"><a class="reference internal" href="models_development.html#application-example">Application example</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="models_development.html#development-of-steady-state-units-with-internal-non-linear-solver">Development of steady-state units with internal non-linear solver</a><ul>
<li class="toctree-l4"><a class="reference internal" href="models_development.html#id1">Application example</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="models_development.html#development-of-dynamic-units">Development of dynamic units</a><ul>
<li class="toctree-l4"><a class="reference internal" href="models_development.html#label-basics">Application example</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="models_development.html#development-of-dynamic-units-with-internal-dae-solver">Development of dynamic units with internal DAE solver</a><ul>
<li class="toctree-l4"><a class="reference internal" href="models_development.html#id3">Application example</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="models_development.html#configure-unit-to-work-with-matlab">Configure unit to work with MATLAB</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="models_development.html#solver-development">Solver development</a><ul>
<li class="toctree-l3"><a class="reference internal" href="models_development.html#add-new-solver-to-the-template-project">Add new solver to the template project</a></li>
<li class="toctree-l3"><a class="reference internal" href="models_development.html#configure-dyssol-to-work-with-implemented-solvers">Configure Dyssol to work with implemented solvers</a></li>
<li class="toctree-l3"><a class="reference internal" href="models_development.html#development-of-agglomeration-solver">Development of agglomeration solver</a></li>
<li class="toctree-l3"><a class="reference internal" href="models_development.html#configure-solver-to-work-with-matlab">Configure solver to work with MATLAB</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="api.html">Models API</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="class_baseunit.html">Basic unit</a></li>
<li class="toctree-l2"><a class="reference internal" href="class_basestream.html">Basic stream</a></li>
<li class="toctree-l2"><a class="reference internal" href="class_stream.html">Stream</a></li>
<li class="toctree-l2"><a class="reference internal" href="class_holdup.html">Holdup</a></li>
<li class="toctree-l2"><a class="reference internal" href="class_portsmanager.html">Ports manager</a></li>
<li class="toctree-l2"><a class="reference internal" href="class_unitport.html">Unit port</a></li>
<li class="toctree-l2"><a class="reference internal" href="class_unitparametersmanager.html">Unit parameters manager</a></li>
<li class="toctree-l2"><a class="reference internal" href="class_unitparameters.html">Unit parameters</a><ul>
<li class="toctree-l3"><a class="reference internal" href="class_upbase.html">Base class</a></li>
<li class="toctree-l3"><a class="reference internal" href="class_upconst.html">Const</a></li>
<li class="toctree-l3"><a class="reference internal" href="class_upconstreal.html">Const real</a></li>
<li class="toctree-l3"><a class="reference internal" href="class_upconstint.html">Const int</a></li>
<li class="toctree-l3"><a class="reference internal" href="class_upconstuint.html">Const uint</a></li>
<li class="toctree-l3"><a class="reference internal" href="class_updependent.html">Dependent</a></li>
<li class="toctree-l3"><a class="reference internal" href="class_uptd.html">Time-dependent</a></li>
<li class="toctree-l3"><a class="reference internal" href="class_upstring.html">String</a></li>
<li class="toctree-l3"><a class="reference internal" href="class_upcheckbox.html">Check box</a></li>
<li class="toctree-l3"><a class="reference internal" href="class_upcombobox.html">Combo box</a></li>
<li class="toctree-l3"><a class="reference internal" href="class_upcompound.html">Compound</a></li>
<li class="toctree-l3"><a class="reference internal" href="class_upcompoundmdb.html">MDB compound</a></li>
<li class="toctree-l3"><a class="reference internal" href="class_upreaction.html">Reaction</a></li>
<li class="toctree-l3"><a class="reference internal" href="class_uplist.html">List</a></li>
<li class="toctree-l3"><a class="reference internal" href="class_uplistreal.html">List real</a></li>
<li class="toctree-l3"><a class="reference internal" href="class_uplistint.html">List int</a></li>
<li class="toctree-l3"><a class="reference internal" href="class_uplistuint.html">List uint</a></li>
<li class="toctree-l3"><a class="reference internal" href="class_upsolver.html">Solver</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="class_chemicalreaction.html">Chemical reaction</a></li>
<li class="toctree-l2"><a class="reference internal" href="class_agglomerationsolver.html">Agglomeration solver</a></li>
<li class="toctree-l2"><a class="reference internal" href="class_basesolver.html">Base solver</a></li>
<li class="toctree-l2"><a class="reference internal" href="class_statevariablesmanager.html">State variables manager</a></li>
<li class="toctree-l2"><a class="reference internal" href="class_statevariable.html">State variable</a></li>
<li class="toctree-l2"><a class="reference internal" href="class_curve.html">Curve</a></li>
<li class="toctree-l2"><a class="reference internal" href="class_plot.html">Plot</a></li>
<li class="toctree-l2"><a class="reference internal" href="class_plotmanager.html">Plot manager</a></li>
<li class="toctree-l2"><a class="reference internal" href="class_mixtureenthalpylookup.html">Enthalpy lookup table</a></li>
<li class="toctree-l2"><a class="reference internal" href="class_matrix2d.html">Two-mensional matrix</a></li>
<li class="toctree-l2"><a class="reference internal" href="class_densemdmatrix.html">Multidimensional matrix</a></li>
<li class="toctree-l2"><a class="reference internal" href="class_transformmatrix.html">Transformation matrix</a></li>
<li class="toctree-l2"><a class="reference internal" href="auxiliary_classes.html">Auxiliary classes</a></li>
<li class="toctree-l2"><a class="reference internal" href="psd_functions.html">PSD functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="distribution_functions.html">Distribution functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="thermodynamics.html">Thermodynamics</a><ul>
<li class="toctree-l3"><a class="reference internal" href="thermodynamics.html#for-material-stream-and-holdup">For material stream and holdup</a></li>
<li class="toctree-l3"><a class="reference internal" href="thermodynamics.html#for-base-unit">For base unit</a></li>
</ul>
</li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">DAE Systems</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#dae-model">DAE model</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#variables">Variables</a></li>
<li class="toctree-l4"><a class="reference internal" href="#tolerance">Tolerance</a></li>
<li class="toctree-l4"><a class="reference internal" href="#virtual-functions">Virtual functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="#other-functions">Other functions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#dae-solver">DAE solver</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#model">Model</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id1">Other functions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#application-example">Application example</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="solver_kinsol.html">NL Systems</a></li>
<li class="toctree-l2"><a class="reference internal" href="solver_external.html">External solver</a><ul>
<li class="toctree-l3"><a class="reference internal" href="solver_external.html#basic-information">Basic information</a></li>
<li class="toctree-l3"><a class="reference internal" href="solver_external.html#virtual-functions">Virtual functions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="constants.html">List of constants</a><ul>
<li class="toctree-l3"><a class="reference internal" href="constants.html#universal-physical-constants">Universal physical constants</a></li>
<li class="toctree-l3"><a class="reference internal" href="constants.html#dyssol-constants">Dyssol constants</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #0E70B6" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Dyssol</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content style-external-links">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="api.html">Models API</a> &raquo;</li>
      <li>DAE Systems</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="dae-systems">
<span id="sec-development-api-solver-dae"></span><h1>DAE Systems<a class="headerlink" href="#dae-systems" title="Permalink to this headline"></a></h1>
<p>In Dyssol, you can solve systems of <abbr title="Differential-algebraic equations">DAE</abbr> automatically. In this case, the unit should contain one or several additional objects of class <code class="docutils literal notranslate"><span class="pre">CDAEModel</span></code>. This class is used to describe <abbr title="Differential-algebraic equations">DAE</abbr> systems and can be automatically solved with class <code class="docutils literal notranslate"><span class="pre">CDAESolver</span></code>.</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
<section id="dae-model">
<h2>DAE model<a class="headerlink" href="#dae-model" title="Permalink to this headline"></a></h2>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">CDAEModel</span><span class="p">()</span><span class="w"></span>
</pre></div>
</div>
<p>Basic <strong>constructor</strong>. Creates an empty DAE model.</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
<section id="variables">
<h3>Variables<a class="headerlink" href="#variables" title="Permalink to this headline"></a></h3>
<div class="highlight-cpp notranslate" id="label-adddaevariable"><div class="highlight"><pre><span></span><span class="kt">unsigned</span><span class="w"> </span><span class="n">AddDAEVariable</span><span class="p">(</span><span class="kt">bool</span><span class="w"> </span><span class="n">_bIsDifferentiable</span><span class="p">,</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">_dVariableInit</span><span class="p">,</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">_dDerivativeInit</span><span class="p">,</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">_dConstraint</span><span class="p">)</span><span class="w"></span>
</pre></div>
</div>
<p>Adds new algebraic (<code class="docutils literal notranslate"><span class="pre">_bIsDifferentiable</span> <span class="pre">=</span> <span class="pre">false</span></code>) or differential (<code class="docutils literal notranslate"><span class="pre">_bIsDifferentiable</span> <span class="pre">=</span> <span class="pre">true</span></code>) variable with initial values <code class="docutils literal notranslate"><span class="pre">_dVariableInit</span></code> and <code class="docutils literal notranslate"><span class="pre">_dDerivativeInit</span></code>.</p>
<p>Should be called in function <code class="docutils literal notranslate"><span class="pre">Initialize(Time)</span></code> of the unit. Returns unique index of added variable.</p>
<p><code class="docutils literal notranslate"><span class="pre">_dConstraint</span></code> sets the constraint for the variable, different values of <code class="docutils literal notranslate"><span class="pre">_dConstraint</span></code> are defined as follows:</p>
<blockquote>
<div><ul class="simple">
<li><p>0.0: no constraint</p></li>
<li><p>1.0: Variable ≥ 0.0</p></li>
<li><p>−1.0: Variable ≤ 0.0</p></li>
<li><p>2.0: Variable &gt; 0.0</p></li>
<li><p>−2.0: Variable &lt; 0.0</p></li>
</ul>
</div></blockquote>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="kt">unsigned</span><span class="w"> </span><span class="n">GetVariablesNumber</span><span class="p">()</span><span class="w"></span>
</pre></div>
</div>
<p>Returns current number of defined variables.</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span><span class="w"> </span><span class="n">ClearVariables</span><span class="p">()</span><span class="w"></span>
</pre></div>
</div>
<p>Removes all defined variables from the model.</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
</section>
<section id="tolerance">
<h3>Tolerance<a class="headerlink" href="#tolerance" title="Permalink to this headline"></a></h3>
<div class="highlight-cpp notranslate" id="label-settol"><div class="highlight"><pre><span></span><span class="kt">void</span><span class="w"> </span><span class="n">SetTolerance</span><span class="p">(</span><span class="kt">double</span><span class="w"> </span><span class="n">_dRTol</span><span class="p">,</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">_dATol</span><span class="p">)</span><span class="w"></span>
</pre></div>
</div>
<p>Sets values of relative and absolute tolerances for all variables.</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span><span class="w"> </span><span class="n">SetTolerance</span><span class="p">(</span><span class="kt">double</span><span class="w"> </span><span class="n">_dRTol</span><span class="p">,</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">double</span><span class="o">&gt;</span><span class="w"> </span><span class="o">&amp;</span><span class="n">_vATol</span><span class="p">)</span><span class="w"></span>
</pre></div>
</div>
<p>Sets value of relative tolerance for all variables and absolute tolerances for each variable separately.</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="kt">double</span><span class="w"> </span><span class="n">GetRTol</span><span class="p">()</span><span class="w"></span>
</pre></div>
</div>
<p>Returns current relative tolerance.</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="kt">double</span><span class="w"> </span><span class="n">GetATol</span><span class="p">(</span><span class="kt">unsigned</span><span class="w"> </span><span class="n">_dIndex</span><span class="p">)</span><span class="w"></span>
</pre></div>
</div>
<p>Returns current absolute tolerance for specified variable.</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
</section>
<section id="virtual-functions">
<h3>Virtual functions<a class="headerlink" href="#virtual-functions" title="Permalink to this headline"></a></h3>
<div class="highlight-cpp notranslate" id="label-calculateresiduals"><div class="highlight"><pre><span></span><span class="k">virtual</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="n">CalculateResiduals</span><span class="p">(</span><span class="kt">double</span><span class="w"> </span><span class="n">_dTime</span><span class="p">,</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="o">*</span><span class="n">_pVars</span><span class="p">,</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="o">*</span><span class="n">_pDerivs</span><span class="p">,</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="o">*</span><span class="n">_pRes</span><span class="p">,</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="n">_pUserData</span><span class="p">)</span><span class="w"></span>
</pre></div>
</div>
<p>Computes the problem residual for given values of the independent variable <code class="docutils literal notranslate"><span class="pre">_dTime</span></code>, state vector <code class="docutils literal notranslate"><span class="pre">_pVars</span></code>, and derivatives <code class="docutils literal notranslate"><span class="pre">_pDerivs</span></code>. Here the <abbr title="Differential-algebraic equations">DAE</abbr> system should be specified in implicit form. Function will be called by solver automatically.</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">_dTime</span></code>: current value of the independent variable <span class="math notranslate nohighlight">\(t\)</span>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">_pVars</span></code>: pointer to an array of the dependent variables, <span class="math notranslate nohighlight">\(y(t)\)</span>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">_pDerivs</span></code>: pointer to an array of derivatives <span class="math notranslate nohighlight">\(y'(t)\)</span>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">_pRes</span></code>: output residual vector <span class="math notranslate nohighlight">\(F(t, y, y')\)</span>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">_pUserData</span></code>: pointer to user’s data. Is used to provide access from this function to unit’s data.</p></li>
</ul>
</div></blockquote>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="highlight-cpp notranslate" id="label-resultshandler"><div class="highlight"><pre><span></span><span class="k">virtual</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="n">ResultsHandler</span><span class="p">(</span><span class="kt">double</span><span class="w"> </span><span class="n">_dTime</span><span class="p">,</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="o">*</span><span class="n">_pVars</span><span class="p">,</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="o">*</span><span class="n">_pDerivs</span><span class="p">,</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="n">_pUserData</span><span class="p">)</span><span class="w"></span>
</pre></div>
</div>
<p>Processing the results returned by the solver at each calculated step. Called by solver every time when the solution in new time point is ready.</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">_dTime</span></code>: current value of the independent variable <span class="math notranslate nohighlight">\(t\)</span>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">_pVars</span></code>: current values of the dependent variables, <span class="math notranslate nohighlight">\(y(t)\)</span>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">_pDerivs</span></code>: current values of derivatives <span class="math notranslate nohighlight">\(y'(t)\)</span>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">_pUserData</span></code>: pointer to user’s data. Is used to provide access from this function to unit’s data.</p></li>
</ul>
</div></blockquote>
<div class="line-block">
<div class="line"><br /></div>
</div>
</section>
<section id="other-functions">
<h3>Other functions<a class="headerlink" href="#other-functions" title="Permalink to this headline"></a></h3>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span><span class="w"> </span><span class="n">Clear</span><span class="p">()</span><span class="w"></span>
</pre></div>
</div>
<p>Removes all data from the model.</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span><span class="w"> </span><span class="n">SetUserData</span><span class="p">(</span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="n">_pUserData</span><span class="p">)</span><span class="w"></span>
</pre></div>
</div>
<p>Set pointer to user’s data. This data will be returned in overloaded functions <a class="reference internal" href="#label-calculateresiduals"><span class="std std-ref">CalculateResiduals</span></a> and <a class="reference internal" href="#label-resultshandler"><span class="std std-ref">ResultsHandler</span></a>. Usually is used to provide access from these functions to unit’s data.</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
</section>
</section>
<section id="dae-solver">
<span id="label-daesolver"></span><h2>DAE solver<a class="headerlink" href="#dae-solver" title="Permalink to this headline"></a></h2>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">CDAESolver</span><span class="p">()</span><span class="w"></span>
</pre></div>
</div>
<p>Basic <strong>constructor</strong>. Creates an empty solver.</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
<section id="model">
<h3>Model<a class="headerlink" href="#model" title="Permalink to this headline"></a></h3>
<div class="highlight-cpp notranslate" id="label-setmodel"><div class="highlight"><pre><span></span><span class="kt">bool</span><span class="w"> </span><span class="n">SetModel</span><span class="p">(</span><span class="n">CDAEModel</span><span class="w"> </span><span class="o">*</span><span class="n">_pModel</span><span class="p">)</span><span class="w"></span>
</pre></div>
</div>
<p>Sets model to a solver. Should be called in function <a class="reference internal" href="models_development.html#label-dynamicunitinitialize"><span class="std std-ref">Initialize</span></a> of the unit.</p>
<p>Returns <code class="docutils literal notranslate"><span class="pre">false</span></code> on error.</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="kt">bool</span><span class="w"> </span><span class="n">SetMaxStep</span><span class="p">()</span><span class="w"></span>
</pre></div>
</div>
<p>Sets maximum time step for solver. Should be used in <a class="reference internal" href="models_development.html#label-dynamicunitinitialize"><span class="std std-ref">Initialize</span></a> before the function <a class="reference internal" href="#label-setmodel"><span class="std std-ref">SetModel</span></a>.</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="highlight-cpp notranslate" id="label-calculate"><div class="highlight"><pre><span></span><span class="kt">bool</span><span class="w"> </span><span class="n">Calculate</span><span class="p">(</span><span class="kt">double</span><span class="w"> </span><span class="n">_dTime</span><span class="p">,</span><span class="w"> </span><span class="kt">unsigned</span><span class="w"> </span><span class="n">_nModel</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">KIN_NONE</span><span class="p">)</span><span class="w"></span>
</pre></div>
</div>
<p>Solves problem on a given time point <code class="docutils literal notranslate"><span class="pre">_dTime</span></code>. Should be called in function <a class="reference internal" href="models_development.html#label-dynamicunitsimulate"><span class="std std-ref">Simulate</span></a> of the unit.</p>
<p>Default value of <code class="docutils literal notranslate"><span class="pre">_nModel</span></code> is <code class="docutils literal notranslate"><span class="pre">KIN_NONE</span></code>, a Newton-based iteration method. Other available models can be found in declaration for KINSOL parameters in the <code class="docutils literal notranslate"><span class="pre">*.cpp</span></code> file, including: <code class="docutils literal notranslate"><span class="pre">KIN_FP</span></code> (fixed point), <code class="docutils literal notranslate"><span class="pre">KIN_LINESEARCH</span></code> and <code class="docutils literal notranslate"><span class="pre">KIN_PICARD</span></code>.</p>
<p>Returns <code class="docutils literal notranslate"><span class="pre">false</span></code> on error.</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="kt">bool</span><span class="w"> </span><span class="n">Calculate</span><span class="p">(</span><span class="kt">double</span><span class="w"> </span><span class="n">_dStartTime</span><span class="p">,</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">_dEndTime</span><span class="p">)</span><span class="w"></span>
</pre></div>
</div>
<p>Solves problem on a given time interval. Should be called in function <a class="reference internal" href="models_development.html#label-dynamicunitsimulate"><span class="std std-ref">Simulate</span></a> of the unit. Returns <code class="docutils literal notranslate"><span class="pre">false</span></code> on error.</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
</section>
<section id="id1">
<h3>Other functions<a class="headerlink" href="#id1" title="Permalink to this headline"></a></h3>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span><span class="w"> </span><span class="n">SaveState</span><span class="p">()</span><span class="w"></span>
</pre></div>
</div>
<p>Saves current state of the solver. Should be called in function <a class="reference internal" href="class_baseunit.html#sec-development-api-class-baseunit"><span class="std std-ref">SaveState</span></a> of the unit.</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span><span class="w"> </span><span class="n">LoadState</span><span class="p">()</span><span class="w"></span>
</pre></div>
</div>
<p>Loads last saved state of the solver. Should be called in function <a class="reference internal" href="class_baseunit.html#sec-development-api-class-baseunit"><span class="std std-ref">LoadState</span></a> of the unit.</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">GetError</span><span class="p">()</span><span class="w"></span>
</pre></div>
</div>
<p>Returns error’s description. Can be called if function <a class="reference internal" href="#label-setmodel"><span class="std std-ref">SetModel</span></a> or <a class="reference internal" href="#label-calculate"><span class="std std-ref">Calculate</span></a> returns <code class="docutils literal notranslate"><span class="pre">false</span></code>.</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
</section>
</section>
<section id="application-example">
<h2>Application example<a class="headerlink" href="#application-example" title="Permalink to this headline"></a></h2>
<p>Assume that you are going to solve a dynamic <abbr title="Differential-algebraic equations">DAE</abbr> system,</p>
<div class="math notranslate nohighlight">
\[ \begin{align}\begin{aligned}\begin{cases}
        \dfrac{dx}{dt} = -0.04 \cdot x + 10^4 \cdot y \cdot z &amp;x(0) = 0.04\\        \dfrac{dy}{dt} = 0.04\cdot x - 10^4 \cdot y \cdot z - 3 \cdot 10^7 \cdot y^2 &amp;y(0) = -0.04\\        x + y + z = 1
\end{cases}\end{aligned}\end{align} \]</div>
<p>where <span class="math notranslate nohighlight">\(x\)</span>, <span class="math notranslate nohighlight">\(y\)</span>, <span class="math notranslate nohighlight">\(z\)</span> are fractions of solid, liquid and vapor phases of the output stream of the unit.</p>
<p>Now you want to develope a new unit for for automatic calculation of this <abbr title="Differential-algebraic equations">DAE</abbr> by using built-in solvers of Dyssol, just do the following steps:</p>
<ol class="arabic">
<li><p>Add a new template unit to your solution and name it <code class="docutils literal notranslate"><span class="pre">DynamicUnitWithSolver</span></code>, please refer to <a class="reference internal" href="models_development.html#label-unitdev"><span class="std std-ref">Unit development</span></a>.</p></li>
<li><p>In file <code class="docutils literal notranslate"><span class="pre">Unit.h</span></code>, there is already a class of <abbr title="Differential-algebraic equations">DAE</abbr> model <code class="docutils literal notranslate"><span class="pre">CMyDAEModel</span></code> defined with:</p>
<ul class="simple">
<li><p>two functions, which must be overridden (<a class="reference internal" href="#label-calculateresiduals"><span class="std std-ref">CalculateResiduals</span></a> and <a class="reference internal" href="#label-resultshandler"><span class="std std-ref">ResultsHandler</span></a>) and</p></li>
<li><p>a class of unit <code class="docutils literal notranslate"><span class="pre">CUnit</span></code> with two additional variables (for <abbr title="Differential-algebraic equations">DAE</abbr> model <code class="docutils literal notranslate"><span class="pre">CMyDAEModel</span> <span class="pre">m_Model</span></code>, for <abbr title="Differential-algebraic equations">DAE</abbr> solver <code class="docutils literal notranslate"><span class="pre">CDAESolver</span> <span class="pre">m_Solver</span></code>).</p></li>
</ul>
<p>Add three variables in class <code class="docutils literal notranslate"><span class="pre">CMyDAEModel</span></code> to store indices for <span class="math notranslate nohighlight">\(x\)</span>, <span class="math notranslate nohighlight">\(y\)</span> and <span class="math notranslate nohighlight">\(z\)</span> variables, name them <code class="docutils literal notranslate"><span class="pre">m_nS</span></code>, <code class="docutils literal notranslate"><span class="pre">m_nL</span></code> and <code class="docutils literal notranslate"><span class="pre">m_nV</span></code> respectively.</p>
<p>After adding description of class <code class="docutils literal notranslate"><span class="pre">CMyDAEModel</span></code>, your code should look like this:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">CMyDAEModel</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="k">public</span><span class="w"> </span><span class="n">CDAEModel</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="k">public</span><span class="o">:</span><span class="w"></span>
<span class="w">        </span><span class="kt">unsigned</span><span class="w"> </span><span class="n">m_nS</span><span class="p">;</span><span class="w"> </span><span class="c1">//solid fraction</span>
<span class="w">        </span><span class="kt">unsigned</span><span class="w"> </span><span class="n">m_nL</span><span class="p">;</span><span class="w"> </span><span class="c1">//liquid fraction</span>
<span class="w">        </span><span class="kt">unsigned</span><span class="w"> </span><span class="n">m_nV</span><span class="p">;</span><span class="w"> </span><span class="c1">//vapor fraction</span>

<span class="k">public</span><span class="o">:</span><span class="w"></span>
<span class="w">        </span><span class="kt">void</span><span class="w"> </span><span class="n">CalculateResiduals</span><span class="p">(</span><span class="kt">double</span><span class="w"> </span><span class="n">_dTime</span><span class="p">,</span><span class="w"> </span><span class="kt">double</span><span class="o">*</span><span class="w"> </span><span class="n">_pVars</span><span class="p">,</span><span class="w"> </span><span class="kt">double</span><span class="o">*</span><span class="w"> </span><span class="n">_pDers</span><span class="p">,</span><span class="w"> </span><span class="kt">double</span><span class="o">*</span><span class="w"> </span><span class="n">_pRes</span><span class="p">,</span><span class="w"> </span><span class="kt">void</span><span class="o">*</span><span class="w"> </span><span class="n">_pUserData</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="kt">void</span><span class="w"> </span><span class="nf">ResultsHandler</span><span class="p">(</span><span class="kt">double</span><span class="w"> </span><span class="n">_dTime</span><span class="p">,</span><span class="w"> </span><span class="kt">double</span><span class="o">*</span><span class="w"> </span><span class="n">_pVars</span><span class="p">,</span><span class="w"> </span><span class="kt">double</span><span class="o">*</span><span class="w"> </span><span class="n">_pDers</span><span class="p">,</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="n">_pUserData</span><span class="p">);</span><span class="w"></span>
<span class="p">};</span><span class="w"></span>
</pre></div>
</div>
</li>
<li><p>Setup unit’s basic info (name, author’s name, unique ID, ports) as described in <a class="reference internal" href="models_development.html#label-unitdev"><span class="std std-ref">Unit development</span></a>.Then provide model with pointer to your unit, in order to have an access to the unit from functions of the model. Now your unit’s constructor should look like this:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">CUnit</span><span class="o">::</span><span class="n">CUnit</span><span class="p">()</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="c1">// Unit basic information</span>
<span class="w">        </span><span class="n">m_sUnitName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;DummyUnit4&quot;</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="n">m_sAuthorName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Author&quot;</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="n">m_sUniqueID</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;344BCC0048AA4c3a9117F20A9F8AF9A8&quot;</span><span class="p">;</span><span class="w"> </span><span class="c1">//an example ID</span>

<span class="w">        </span><span class="c1">// Add ports for in- and outlets</span>
<span class="w">        </span><span class="n">AddPort</span><span class="p">(</span><span class="s">&quot;InPort&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">INPUT_PORT</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="n">AddPort</span><span class="p">(</span><span class="s">&quot;OutPort&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">OUTPUT_PORT</span><span class="p">);</span><span class="w"></span>

<span class="w">        </span><span class="c1">// Set this unit as user data of the model applied</span>
<span class="w">        </span><span class="n">m_Model</span><span class="p">.</span><span class="n">SetUserData</span><span class="p">(</span><span class="k">this</span><span class="p">);</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
</li>
<li><p>Implement function <code class="docutils literal notranslate"><span class="pre">Initialize</span></code> of the unit:</p>
<p>Since function <code class="docutils literal notranslate"><span class="pre">Initialize</span></code> is called every time when simulation starts, all variables must be previously removed from the model by calling <code class="docutils literal notranslate"><span class="pre">ClearVariables</span></code>.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">m_Model</span><span class="p">.</span><span class="n">ClearVariables</span><span class="p">();</span><span class="w"></span>
</pre></div>
</div>
<p>Now you can add 3 variables with specified initial conditions to the model (using function <a class="reference internal" href="#label-adddaevariable"><span class="std std-ref">AddDAEVariable</span></a>) according to the equation system. Use phase fractions of the input stream as initials.</p>
<p>Set tolerances to the model using function <a class="reference internal" href="#label-settol"><span class="std std-ref">SetTolerance</span></a>. As tolerances for the model, global tolerances of the system can be used.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">m_Model</span><span class="p">.</span><span class="n">SetTolerance</span><span class="p">(</span><span class="w"> </span><span class="n">GetRelTolerance</span><span class="p">(),</span><span class="w"> </span><span class="n">GetAbsTolerance</span><span class="p">()</span><span class="w"> </span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>Now, you can connect your model to the solver by calling function <a class="reference internal" href="#label-setmodel"><span class="std std-ref">SetModel</span></a>. To receive errors from solver, connect it to the global errors handling procedure.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">if</span><span class="p">(</span><span class="w"> </span><span class="o">!</span><span class="n">m_Solver</span><span class="p">.</span><span class="n">SetModel</span><span class="p">(</span><span class="o">&amp;</span><span class="n">m_Model</span><span class="p">)</span><span class="w"> </span><span class="p">)</span><span class="w"></span>
<span class="w">        </span><span class="n">RaiseError</span><span class="p">(</span><span class="n">m_Solver</span><span class="p">.</span><span class="n">GetError</span><span class="p">());</span><span class="w"></span>
</pre></div>
</div>
<p>Your code should look like this after following all steps above:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span><span class="w"> </span><span class="nf">CUnit::Initialize</span><span class="p">(</span><span class="kt">double</span><span class="w"> </span><span class="n">_dTime</span><span class="p">)</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="c1">// Get pointer to inlet stream</span>
<span class="w">        </span><span class="n">CMaterialStream</span><span class="o">*</span><span class="w"> </span><span class="n">pInpStream</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GetPortStream</span><span class="p">(</span><span class="s">&quot;InPort&quot;</span><span class="p">);</span><span class="w"></span>

<span class="w">        </span><span class="c1">// Clear previous state variables in model</span>
<span class="w">        </span><span class="n">m_Model</span><span class="p">.</span><span class="n">ClearVariables</span><span class="p">();</span><span class="w"></span>

<span class="w">        </span><span class="c1">// Add state variables to model</span>
<span class="w">        </span><span class="kt">double</span><span class="w"> </span><span class="n">dSFr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pInpStream</span><span class="o">-&gt;</span><span class="n">GetSinglePhaseProp</span><span class="p">(</span><span class="n">_dTime</span><span class="p">,</span><span class="w"> </span><span class="n">FRACTION</span><span class="p">,</span><span class="w"> </span><span class="n">SOA_SOLID</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="kt">double</span><span class="w"> </span><span class="n">dLFr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pInpStream</span><span class="o">-&gt;</span><span class="n">GetSinglePhaseProp</span><span class="p">(</span><span class="n">_dTime</span><span class="p">,</span><span class="w"> </span><span class="n">FRACTION</span><span class="p">,</span><span class="w"> </span><span class="n">SOA_LIQUID</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="kt">double</span><span class="w"> </span><span class="n">dVFr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pInpStream</span><span class="o">-&gt;</span><span class="n">GetSinglePhaseProp</span><span class="p">(</span><span class="n">_dTime</span><span class="p">,</span><span class="w"> </span><span class="n">FRACTION</span><span class="p">,</span><span class="w"> </span><span class="n">SOA_VAPOR</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="n">m_Model</span><span class="p">.</span><span class="n">m_nS</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">m_Model</span><span class="p">.</span><span class="n">AddDAEVariable</span><span class="p">(</span><span class="nb">true</span><span class="p">,</span><span class="w"> </span><span class="n">dSFr</span><span class="p">,</span><span class="w"> </span><span class="mf">0.04</span><span class="p">,</span><span class="w"> </span><span class="mf">1.0</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="n">m_Model</span><span class="p">.</span><span class="n">m_nL</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">m_Model</span><span class="p">.</span><span class="n">AddDAEVariable</span><span class="p">(</span><span class="nb">true</span><span class="p">,</span><span class="w"> </span><span class="n">dLFr</span><span class="p">,</span><span class="w"> </span><span class="mf">-0.04</span><span class="p">,</span><span class="w"> </span><span class="mf">1.0</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="n">m_Model</span><span class="p">.</span><span class="n">m_nV</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">m_Model</span><span class="p">.</span><span class="n">AddDAEVariable</span><span class="p">(</span><span class="nb">false</span><span class="p">,</span><span class="w"> </span><span class="n">dVFr</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mf">1.0</span><span class="p">);</span><span class="w"></span>

<span class="w">        </span><span class="c1">// Set tolerance to model</span>
<span class="w">        </span><span class="n">m_Model</span><span class="p">.</span><span class="n">SetTolerance</span><span class="p">(</span><span class="w"> </span><span class="n">GetRelTolerance</span><span class="p">(),</span><span class="w"> </span><span class="n">GetAbsTolerance</span><span class="p">()</span><span class="w"> </span><span class="p">);</span><span class="w"></span>

<span class="w">        </span><span class="c1">// Set model to solver</span>
<span class="w">        </span><span class="k">if</span><span class="p">(</span><span class="w"> </span><span class="o">!</span><span class="n">m_Solver</span><span class="p">.</span><span class="n">SetModel</span><span class="p">(</span><span class="o">&amp;</span><span class="n">m_Model</span><span class="p">)</span><span class="w"> </span><span class="p">)</span><span class="w"></span>
<span class="w">                </span><span class="n">RaiseError</span><span class="p">(</span><span class="n">m_Solver</span><span class="p">.</span><span class="n">GetError</span><span class="p">());</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
</li>
<li><p>Connect solver to a system saving / loading procedure in functions <code class="docutils literal notranslate"><span class="pre">SaveState()</span></code> and <code class="docutils literal notranslate"><span class="pre">LoadState()</span></code> of the unit:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span><span class="w"> </span><span class="nf">CUnit::SaveState</span><span class="p">()</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="n">m_Solver</span><span class="p">.</span><span class="n">SaveState</span><span class="p">();</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kt">void</span><span class="w"> </span><span class="nf">CUnit::LoadState</span><span class="p">()</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="n">m_Solver</span><span class="p">.</span><span class="n">LoadState</span><span class="p">();</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
</li>
<li><p>In function <code class="docutils literal notranslate"><span class="pre">Simulate</span></code> of the unit, calculation procedure should be run by calling function <code class="docutils literal notranslate"><span class="pre">Calculate</span></code> of the solver. Additionally, solver can be connected to the system’s errors handling procedure to receive possible errors during the calculation. Unit’s <code class="docutils literal notranslate"><span class="pre">Simulate</span></code> function after that must look as follows:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span><span class="w"> </span><span class="nf">CUnit::Simulate</span><span class="p">(</span><span class="kt">double</span><span class="w"> </span><span class="n">_dStartTime</span><span class="p">,</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">_dEndTime</span><span class="p">)</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="c1">// Get pointers to inlet and outlet streams</span>
<span class="w">        </span><span class="n">CMaterialStream</span><span class="w"> </span><span class="o">*</span><span class="n">pInputStream</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GetPortStream</span><span class="p">(</span><span class="s">&quot;InPort&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="n">CMaterialStream</span><span class="w"> </span><span class="o">*</span><span class="n">pOutputStream</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GetPortStream</span><span class="p">(</span><span class="s">&quot;OutPort&quot;</span><span class="p">);</span><span class="w"></span>

<span class="w">        </span><span class="n">pOutputStream</span><span class="o">-&gt;</span><span class="n">RemoveTimePointsAfter</span><span class="p">(</span><span class="n">_dStartTime</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="n">pOutputStream</span><span class="o">-&gt;</span><span class="n">CopyFromStream</span><span class="p">(</span><span class="n">pInputStream</span><span class="p">,</span><span class="w"> </span><span class="n">_dStartTime</span><span class="p">);</span><span class="w"> </span><span class="c1">// Copy the inlet stream information to outlet stream</span>

<span class="w">        </span><span class="c1">// Run solver and check if errors take place</span>
<span class="w">        </span><span class="k">if</span><span class="p">(</span><span class="w"> </span><span class="o">!</span><span class="n">m_Solver</span><span class="p">.</span><span class="n">Calculate</span><span class="p">(</span><span class="n">_dStartTime</span><span class="p">,</span><span class="w"> </span><span class="n">_dEndTime</span><span class="p">)</span><span class="w"> </span><span class="p">)</span><span class="w"></span>
<span class="w">                </span><span class="n">RaiseError</span><span class="p">(</span><span class="w"> </span><span class="n">m_Solver</span><span class="p">.</span><span class="n">GetError</span><span class="p">()</span><span class="w"> </span><span class="p">);</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
</li>
<li><p>In function <code class="docutils literal notranslate"><span class="pre">CalculateResiduals</span></code>, <abbr title="Differential-algebraic equations">DAE</abbr> system in implicit form should be described. According to the given equation system</p>
<div class="math notranslate nohighlight">
\[ \begin{align}\begin{aligned}\begin{cases}
        \dfrac{dx}{dt} = -0.04 \cdot x + 10^4 \cdot y \cdot z &amp;x(0) = 0.04\\        \dfrac{dy}{dt} = 0.04\cdot x - 10^4 \cdot y \cdot z - 3 \cdot 10^7 \cdot y^2 &amp;y(0) = -0.04\\        x + y + z = 1
\end{cases}\end{aligned}\end{align} \]</div>
<p>and the definition of residual <code class="docutils literal notranslate"><span class="pre">_pRes</span></code> (difference between new and old values from last calculation), the equaitons are expressed below. Here the values are arranged in vector <code class="docutils literal notranslate"><span class="pre">_pVars</span></code> according to sequence <span class="math notranslate nohighlight">\([x, y, z]\)</span>, in <code class="docutils literal notranslate"><span class="pre">_pDers</span></code> according to <span class="math notranslate nohighlight">\([dx, dy]\)</span>.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span><span class="w"> </span><span class="nf">CMyDAEModel::CalculateResiduals</span><span class="p">(</span><span class="kt">double</span><span class="w"> </span><span class="n">_dTime</span><span class="p">,</span><span class="w"> </span><span class="kt">double</span><span class="o">*</span><span class="w"> </span><span class="n">_pVars</span><span class="p">,</span><span class="w"> </span><span class="kt">double</span><span class="o">*</span><span class="w"> </span><span class="n">_pDers</span><span class="p">,</span><span class="w"> </span><span class="kt">double</span><span class="o">*</span><span class="w"> </span><span class="n">_pRes</span><span class="p">,</span><span class="w"> </span><span class="kt">void</span><span class="o">*</span><span class="w"> </span><span class="n">_pUserData</span><span class="p">)</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="n">_pRes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">_pDers</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="p">(</span><span class="mf">-0.04</span><span class="o">*</span><span class="n">_pVars</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">1.0e4</span><span class="o">*</span><span class="n">_pVars</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">*</span><span class="n">_pVars</span><span class="p">[</span><span class="mi">2</span><span class="p">]);</span><span class="w"></span>
<span class="w">        </span><span class="n">_pRes</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">_pDers</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="mf">0.04</span><span class="o">*</span><span class="n">_pVars</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mf">1.0e4</span><span class="o">*</span><span class="n">_pVars</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">*</span><span class="n">_pVars</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mf">3.0e7</span><span class="o">*</span><span class="n">_pVars</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">*</span><span class="n">_pVars</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="w"> </span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="n">_pRes</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">_pVars</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">_pVars</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">_pVars</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
</li>
<li><p>Last step is handling of results from the solver (<code class="docutils literal notranslate"><span class="pre">CMyDAEModel::ResultsHandler</span></code>). Calculated fractions can be set here to the output stream of the unit. To access to the unit’s data, use the pointer <code class="docutils literal notranslate"><span class="pre">_pUserData</span></code> defined previously:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span><span class="w"> </span><span class="nf">CMyDAEModel::ResultsHandler</span><span class="p">(</span><span class="kt">double</span><span class="w"> </span><span class="n">_dTime</span><span class="p">,</span><span class="w"> </span><span class="kt">double</span><span class="o">*</span><span class="w"> </span><span class="n">_pVars</span><span class="p">,</span><span class="w"> </span><span class="kt">double</span><span class="o">*</span><span class="w"> </span><span class="n">_pDerivs</span><span class="p">,</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="n">_pUserData</span><span class="p">)</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="c1">// Get pointers to streams</span>
<span class="w">        </span><span class="n">CUnit</span><span class="w"> </span><span class="o">*</span><span class="n">unit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">static_cast</span><span class="o">&lt;</span><span class="n">CUnit</span><span class="o">*&gt;</span><span class="p">(</span><span class="n">_pUserData</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="n">CMaterialStream</span><span class="w"> </span><span class="o">*</span><span class="n">pStream</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">static_cast</span><span class="o">&lt;</span><span class="n">CMaterialStream</span><span class="o">*&gt;</span><span class="p">(</span><span class="n">unit</span><span class="o">-&gt;</span><span class="n">GetPortStream</span><span class="p">(</span><span class="s">&quot;OutPort&quot;</span><span class="p">));</span><span class="w"></span>

<span class="w">        </span><span class="c1">// Add time point to outlet stream</span>
<span class="w">        </span><span class="n">pStream</span><span class="o">-&gt;</span><span class="n">AddTimePoint</span><span class="p">(</span><span class="n">_dTime</span><span class="p">);</span><span class="w"></span>

<span class="w">        </span><span class="c1">// Set calculated results to corresponding phases</span>
<span class="w">        </span><span class="n">pStream</span><span class="o">-&gt;</span><span class="n">SetSinglePhaseProp</span><span class="p">(</span><span class="n">_dTime</span><span class="p">,</span><span class="w"> </span><span class="n">FRACTION</span><span class="p">,</span><span class="w"> </span><span class="n">SOA_SOLID</span><span class="p">,</span><span class="w"> </span><span class="n">_pVars</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span><span class="w"></span>
<span class="w">        </span><span class="n">pStream</span><span class="o">-&gt;</span><span class="n">SetSinglePhaseProp</span><span class="p">(</span><span class="n">_dTime</span><span class="p">,</span><span class="w"> </span><span class="n">FRACTION</span><span class="p">,</span><span class="w"> </span><span class="n">SOA_LIQUID</span><span class="p">,</span><span class="w"> </span><span class="n">_pVars</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span><span class="w"></span>
<span class="w">        </span><span class="n">pStream</span><span class="o">-&gt;</span><span class="n">SetSinglePhaseProp</span><span class="p">(</span><span class="n">_dTime</span><span class="p">,</span><span class="w"> </span><span class="n">FRACTION</span><span class="p">,</span><span class="w"> </span><span class="n">SOA_VAPOR</span><span class="p">,</span><span class="w"> </span><span class="n">_pVars</span><span class="p">[</span><span class="mi">2</span><span class="p">]);</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
</li>
</ol>
<div class="line-block">
<div class="line"><br /></div>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="thermodynamics.html" class="btn btn-neutral float-left" title="Thermodynamics" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="solver_kinsol.html" class="btn btn-neutral float-right" title="NL Systems" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, DyssolTEC GmbH.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>